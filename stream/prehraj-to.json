{
  "id": "prehraj-to",
  "media": ["movies", "series"],
  "type": ["stream"],
  "name": "Přehraj.to",
  "website": "https://prehraj.to/",
  "repository": "https://raw.githubusercontent.com/username/streamlet-modules/main/stream/prehraj-to.json",
  "author": "PaťaseK",
  "version": "2.0.0",
  "description": "Přehraj.to stream provider with authentication - Czech streaming service for movies and series.",
  "baseUrl": "https://prehraj.to",
  "responseFormat": "scraper",
  "config": {
    "email": {
      "type": "string",
      "label": "{usernameEmail}",
      "default": "",
      "required": true
    },
    "password": {
      "type": "password",
      "label": "{password}",
      "default": "",
      "required": true
    }
  },
  "headers": {
    "accept": "application/json",
    "accept-language": "cs,en;q=0.9",
    "user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36",
    "origin": "https://prehraj.to",
    "referer": "https://prehraj.to/",
    "x-requested-with": "XMLHttpRequest"
  },
  "auth": {
    "steps": [
      {
        "name": "login",
        "method": "POST",
        "url": "/?frm=loginDialog-login-loginForm",
        "headers": {
          "content-type": "multipart/form-data"
        },
        "body": {
          "email": "{email}",
          "password": "{password}",
          "_do": "loginDialog-login-loginForm-submit",
          "login": "Přihlásit se"
        },
        "response": {
          "status": {
            "path": "redirect",
            "states": {
              "success": "https://prehraj.to/?afterLogin=1",
              "error": "authentication_error"
            }
          }
        }
      }
    ]
  },
  "scraper": [
    {
      "name": "Vyhledávání souborů",
      "type": "stream_search",
      "url": "/hledej/{title}",
      "mapping": {
        "id": "regex(attribute(a, href), '/([^/]+)/([a-f0-9]+)$', 2)",
        "name": "selector(h3)",
        "type": "video",
        "size": "regex(selector(a), '([0-9.,]+\\s*[KMGT]?B)', 1)",
        "ratingUp": "regex(selector(a), '\\s+([0-9]+)\\s*$', 1)",
        "link": "attribute(a, href)"
      }
    },
    {
      "name": "Přesměrování na video stránku",
      "type": "link",
      "url": "{link}",
      "mapping": {
        "link": "url"
      }
    }
  ]
}
